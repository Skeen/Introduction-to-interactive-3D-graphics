<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
        attribute vec4 vColor;

        uniform float vScale;

        varying vec4 fColor;

        void
        main()
        {
            gl_PointSize = 100. * vScale;
            gl_Position = vec4(vPosition.xy * vScale - 1.0, 0., 1.);
            fColor = vColor;
        }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;

        varying vec4 fColor;

        void
        main()
        {
            gl_FragColor = fColor;
        }
    </script>
    <script id='block-vertex-shader' type="x-shader/x-fragment">
        attribute vec4 vPosition;
        attribute vec4 vColor;
        attribute vec2 vCenterPos;

        uniform float vScale;
        uniform float vTime;
        uniform vec2 vClickPos;

        varying vec4 fColor;
        varying vec4 fCenter;
        varying vec4 fPosition;
        varying vec2 fClickPos;
        varying float fTime;

        const float PI = 3.14159265358979323846264;

        // Higher == Higher waves
        const float amptitude = 0.01;
        // Higher == Faster wiggle
        const float speed = 20.;
        // Lower == Larger waves
        const float waves = 0.5;

        void
        main()
        {
            gl_PointSize = 100. * vScale;

            fColor      = vColor;
            fCenter     = vec4(vCenterPos.xy * vScale - 1.0, 0., 1.);
            fPosition   = vec4(vPosition.xy  * vScale - 1.0, 0., 1.);

            fTime = vTime;
            float tTime = vTime / 1000.;
            float dist = distance(vPosition.xy, vClickPos);

            float wave = sin(tTime * PI * speed) * sin(dist * PI * waves);

            gl_Position = vec4(fPosition.xy - (wave * amptitude) , 0., 1.);
            fClickPos = vClickPos;
        }
    </script>
    <script id='block-fragment-shader' type="x-shader/x-fragment">
        precision mediump float;

        varying vec4 fPosition;
        varying vec4 fColor;
        varying vec4 fCenter;
        varying float fTime;
        varying vec2 fClickPos;

        void main() {
            vec4 color0 = mix(fColor, vec4(1.0, 1.0, 1.0, 1.0), 0.5);
            vec4 color1 = fColor;

            float distance = length(fCenter.xy - fPosition.xy);
            vec4 color_mix = mix(color0, color1, distance * 60.0);
/*
            float distance_shockwave = length(fClickPos.xy - fPosition.xy);
            color_mix = mix(vec4(0., 0., 0., 1.), color_mix, distance_shockwave * 60);
*/
            gl_FragColor = color_mix;
    }
    </script>
    <script type="text/javascript" src="../Common/webgl-utils.js"></script>
    <script type="text/javascript" src="../Common/initShaders.js"></script>
    <script type="text/javascript" src="../Common/MV.js"></script>
    <script type="text/javascript" src="../Common/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="game.js"></script>
</head>
<body>
<div>
<canvas id="gl-canvas" width="500" height="500">
    Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
</div>

<div>
    <select id="block_picker">
      <option value="STONE">Stone</option>
      <option value="GRASS">Grass</option>
      <option value="DIRT">Dirt</option>
      <option value="WOOD">Wood</option>
      <option value="METAL">Metal</option>
      <option value="WATER">Water</option>
      <option value="FIRE">Fire</option>
    </select>

    <button type="button">Left</button>
    <button type="button">Up</button>
    <button type="button">Right</button>
</div>


</body>
</html>
